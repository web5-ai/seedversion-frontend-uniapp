# 油菜籽成分检测系统

## 简介

这是一个基于uni-app框架开发的油菜籽成分检测系统，主要用于检测油菜籽的油酸、亚油酸等成分含量，并提供品质评级。系统使用Vue3和JavaScript开发，界面采用Tailwind CSS构建，兼容微信小程序与H5环境。

## 技术栈

- uni-app (基于Vue3的跨平台开发框架)
- Vue 3 (响应式UI框架)
- JavaScript (编程语言)
- Vuex (状态管理)
- TailwindCSS (原子化CSS框架)

## 主要功能

1. **检测功能**
   - 拍照/从相册选择油菜籽图片上传
   - AI分析检测油菜籽成分含量
   - 展示检测结果与品质评级

2. **历史记录**
   - 查看过去的检测记录
   - 按时间筛选(全部/本月/本周)
   - 详情查看

3. **个人中心**
   - 用户信息展示
   - 我的检测记录快捷入口
   - 账户设置
   - 帮助与反馈

4. **登录系统**
   - 手机号验证码登录/注册
   - 账户安全管理

## 项目结构

```
├── src                     # 源代码
│   ├── components          # 组件目录
│   │   ├── common          # 通用组件
│   │   ├── form            # 表单组件
│   │   └── layout          # 布局组件
│   ├── pages               # 页面目录
│   │   ├── index           # 首页(检测页面)
│   │   ├── history         # 历史记录页面 
│   │   ├── my              # 个人中心页面
│   │   └── login           # 登录页面
│   ├── static              # 静态资源
│   │   ├── images          # 图片资源
│   │   └── icons           # 图标资源
│   ├── store               # Vuex存储
│   ├── styles              # 样式文件
│   │   └── tailwind.css    # Tailwind CSS文件
│   ├── App.vue             # 主应用组件
│   ├── main.js             # 入口文件
│   ├── manifest.json       # 应用配置
│   └── pages.json          # 页面配置
└── static                  # 全局静态资源
```

## 

## 页面说明

1. **检测页面 (首页)**
   - 提供拍照或从相册选择油菜籽图片的功能
   - 展示最近的检测记录
   - 检测结果包含油酸、亚油酸含量和品质评级

2. **历史记录页面**
   - 展示所有历史检测记录
   - 提供时间筛选功能(全部/本月/本周)
   - 点击记录可查看详情

3. **个人中心页面**
   - 展示用户基本信息
   - 提供功能入口(历史记录、收藏、检测报告等)
   - 提供账户安全设置
   - 帮助与反馈入口
   - 退出登录功能

4. **登录页面**
   - 手机号输入
   - 验证码获取与输入
   - 登录/注册功能
   - 用户协议与隐私政策链接

## 数据流

1. **用户登录**
   - 用户输入手机号，点击获取验证码
   - 用户输入验证码，点击登录
   - 登录成功后，保存token到本地，后续Authorization字段就用这个token

2. **模型预测**
   - 该页面同时显示最近上传，这个每次打开app都会清空
   - 用户拍照或从相册选择图片，用户选择模型
   - 上传图片到服务器进行检测
   - 服务器返回检测结果，每个图片应该有的信息:(唯一标识, 采集信息, 每种模型对应的任务id，对应模型的数据)
   - 跳转到结果页，需要图片唯一标识
3. **历史记录**
   - 登录或点击历史记录按钮后加载历史记录，根据usr_id查询，如果全部数据量比较大，可以考虑分页加载，每条数据主要包含图片文件和文字内容，单页加载量不大
   - 点击跳转到结果页，需要图片标识
   - 展示记录列表，包括时间、检测结果、品质评级等


## 安装和运行

### 环境要求

- Node.js v16.20.2 (推荐)
- Yarn包管理器

### 安装依赖

```bash
# 安装依赖
yarn
```

### 开发模式运行

```bash
# H5模式
yarn dev:h5

# 微信小程序模式
yarn dev:mp-weixin
```

### 构建发布

```bash
# 构建H5版本
yarn build:h5

# 构建微信小程序版本
yarn build:mp-weixin
```

## 数据流说明

1. **用户数据**
   - 通过Vuex管理用户登录状态和基本信息
   - 登录成功后的token存储在本地storage中

2. **检测数据**
   - 检测记录保存在应用内，展示在首页和历史记录页
   - 生产环境中应与后端API交互保存数据

## 注意事项

- 本项目使用TailwindCSS进行样式管理
- 所有图片资源统一放在`/static/images/`目录下
- 图标资源放在`/static/icons/`目录下
- 在真机测试前需确保相机等权限已正确配置 